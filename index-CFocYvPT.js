import{r as m,a as ge,u as le,L,O as be,N as ie,b as de,c as fe,d as je,R as ve,e as Ne}from"./react-vendor-Ctlj0xK3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))o(x);new MutationObserver(x=>{for(const p of x)if(p.type==="childList")for(const g of p.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function r(x){const p={};return x.integrity&&(p.integrity=x.integrity),x.referrerPolicy&&(p.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?p.credentials="include":x.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function o(x){if(x.ep)return;x.ep=!0;const p=r(x);fetch(x.href,p)}})();var me={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye=m,we=Symbol.for("react.element"),Se=Symbol.for("react.fragment"),Pe=Object.prototype.hasOwnProperty,ke=ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ee={key:!0,ref:!0,__self:!0,__source:!0};function xe(a,t,r){var o,x={},p=null,g=null;r!==void 0&&(p=""+r),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(g=t.ref);for(o in t)Pe.call(t,o)&&!Ee.hasOwnProperty(o)&&(x[o]=t[o]);if(a&&a.defaultProps)for(o in t=a.defaultProps,t)x[o]===void 0&&(x[o]=t[o]);return{$$typeof:we,type:a,key:p,ref:g,props:x,_owner:ke.current}}ae.Fragment=Se;ae.jsx=xe;ae.jsxs=xe;me.exports=ae;var e=me.exports,ue,oe=ge;ue=oe.createRoot,oe.hydrateRoot;const _e="/api";class Ce{constructor(){this.token=localStorage.getItem("auth_token"),this.user=this.getStoredUser()}setToken(t){this.token=t,t?localStorage.setItem("auth_token",t):localStorage.removeItem("auth_token")}getToken(){return this.token||localStorage.getItem("auth_token")}setUser(t){this.user=t,t?localStorage.setItem("auth_user",JSON.stringify(t)):localStorage.removeItem("auth_user")}getStoredUser(){try{const t=localStorage.getItem("auth_user");return t?JSON.parse(t):null}catch{return null}}getUser(){return this.user}clearAuth(){this.token=null,this.user=null,localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user")}async request(t,r={}){const o=`${_e}${t}`,x=this.getToken(),p={headers:{"Content-Type":"application/json",...x&&{Authorization:`Bearer ${x}`},...r.headers},...r};try{const g=await fetch(o,p);if(g.status===401)throw this.clearAuth(),window.location.pathname.includes("/login")||(window.location.href="/login"),new Error("Sessão expirada. Faça login novamente.");if(!g.ok){const k=await g.json().catch(()=>({}));throw new Error(k.error||`HTTP ${g.status}: ${g.statusText}`)}return await g.json()}catch(g){throw console.error(`API Error (${t}):`,g),g}}async login(t,r){const o=await this.request("/auth.php?action=login",{method:"POST",body:JSON.stringify({email:t,password:r})});return o.data.token&&(this.setToken(o.data.token),this.setUser(o.data.user)),o}async logout(){try{await this.request("/auth.php?action=logout",{method:"POST"})}catch(t){console.warn("Erro no logout:",t)}finally{this.clearAuth()}}async verifyToken(){try{const t=await this.request("/auth.php?action=verify");return t.data.user&&this.setUser(t.data.user),t}catch(t){throw this.clearAuth(),t}}async getProfile(){return this.request("/auth.php?action=profile")}async register(t){return this.request("/register.php",{method:"POST",body:JSON.stringify(t)})}async getSessions(){return this.request("/session.php")}async createSession(t){return this.request("/session.php",{method:"POST",body:JSON.stringify(t)})}async updateSession(t,r){return this.request(`/session.php?id=${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSession(t){return this.request(`/session.php?id=${t}`,{method:"DELETE"})}async getPlayers(){return this.request("/players.php")}async sendInvite(t){return this.request("/invite.php?action=send",{method:"POST",body:JSON.stringify(t)})}async getInvites(){return this.request("/invite.php?action=list")}async getPendingInvites(){return this.request("/invite.php?action=pending")}async cancelInvite(t){return this.request(`/invite.php?action=cancel&id=${t}`,{method:"DELETE"})}async getGlobalStats(){return this.request("/super_admin.php?action=stats")}async getAllTenants(t={}){const r=new URLSearchParams(t);return this.request(`/super_admin.php?action=tenants&${r}`)}async getTenantDetails(t){return this.request(`/super_admin.php?action=tenant_details&tenant_id=${t}`)}async getRecentActivity(){return this.request("/super_admin.php?action=recent_activity")}async getRevenueReport(){return this.request("/super_admin.php?action=revenue")}async suspendTenant(t,r){return this.request("/super_admin.php?action=suspend_tenant",{method:"POST",body:JSON.stringify({tenant_id:t,reason:r})})}async activateTenant(t){return this.request("/super_admin.php?action=activate_tenant",{method:"POST",body:JSON.stringify({tenant_id:t})})}async changeTenantPlan(t,r){return this.request("/super_admin.php?action=change_plan",{method:"POST",body:JSON.stringify({tenant_id:t,plan:r})})}isAuthenticated(){return!!this.getToken()&&!!this.getUser()}isSuperAdmin(){const t=this.getUser();return t&&t.role==="super_admin"}isTenantAdmin(){const t=this.getUser();return t&&(t.role==="admin"||t.role==="super_admin")}getTenantInfo(){const t=this.getUser();return t?{id:t.tenant_id,name:t.tenant_name,plan:t.tenant_plan}:null}}const O=new Ce,he=m.createContext(),K=()=>{const a=m.useContext(he);if(!a)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return a},Re=({children:a})=>{const[t,r]=m.useState(null),[o,x]=m.useState(!0),[p,g]=m.useState(null);m.useEffect(()=>{A()},[]);const A=async()=>{try{if(x(!0),g(null),!O.getToken()){r(null),x(!1);return}const j=await O.verifyToken();r(j.data.user)}catch(j){console.warn("Token inválido:",j),r(null),O.clearAuth()}finally{x(!1)}},b={user:t,loading:o,error:p,login:async(j,I)=>{try{x(!0),g(null);const $=await O.login(j,I);return r($.data.user),$.data}catch($){throw g($.message),$}finally{x(!1)}},logout:async()=>{try{x(!0),await O.logout()}catch(j){console.warn("Erro no logout:",j)}finally{r(null),x(!1),window.location.href="/login"}},register:async j=>{try{return x(!0),g(null),(await O.register(j)).data}catch(I){throw g(I.message),I}finally{x(!1)}},updateProfile:async()=>{try{const j=await O.getProfile();return r(j.data.user),j.data}catch(j){throw console.warn("Erro ao atualizar perfil:",j),j}},checkAuth:A,isAuthenticated:()=>!!t&&!!O.getToken(),isSuperAdmin:()=>t&&t.role==="super_admin",isTenantAdmin:()=>t&&(t.role==="admin"||t.role==="super_admin"),isRegularUser:()=>t&&t.role==="user",getTenantInfo:()=>t?{id:t.tenant_id,name:t.tenant_name,plan:t.tenant_plan}:null,clearError:()=>g(null)};return e.jsx(he.Provider,{value:b,children:a})};function Ae(){const[a]=m.useState("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"),[t,r]=m.useState(!1),[o,x]=m.useState([{type:"ai",content:"🤖 Olá! Sou o PokerBot! Posso te ajudar com informações sobre suas sessões de poker. Pergunte-me sobre estatísticas, quem deve quem, rankings e muito mais!"}]),[p,g]=m.useState(""),[A,k]=m.useState(!1),[y,T]=m.useState([]),R=m.useRef(null);m.useEffect(()=>{i(),console.log("🤖 PokerBot API Key:",a?"Configurada":"Não configurada"),console.log("🤖 API Key value:",a==="API_KEY_PLACEHOLDER"?"PLACEHOLDER":"REAL_KEY")},[]),m.useEffect(()=>{l()},[o]);const l=()=>{var d;(d=R.current)==null||d.scrollIntoView({behavior:"smooth"})},i=async()=>{try{const d=await O.getSessions();T(d.data||[])}catch(d){console.error("Erro ao carregar sessões para o bot:",d)}},N=()=>{const d={};return y.forEach(n=>{n.players_data&&Array.isArray(n.players_data)&&n.players_data.forEach(u=>{var P;if(u.name){d[u.name]||(d[u.name]={name:u.name,participations:0,totalBuyIns:0,totalCashOut:0,totalProfit:0,totalDinner:0,sessions:[]});const S=(u.buyIns||[]).reduce((q,F)=>q+F,0),h=u.cashOut||0,v=((P=u.dinner)==null?void 0:P.amount)||0,_=h-S;d[u.name].participations+=1,d[u.name].totalBuyIns+=S,d[u.name].totalCashOut+=h,d[u.name].totalProfit+=_,d[u.name].totalDinner+=v,d[u.name].sessions.push({date:n.date,profit:_,dinner:v})}})}),Object.values(d)},E=async(d,n)=>{var u,P,S;if(a==="API_KEY_PLACEHOLDER"||!a)return"🤖 IA avançada não configurada. Mas posso responder perguntas básicas sobre seus dados!";try{const h=await fetch("https://api.groq.com/openai/v1/chat/completions",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({model:"llama-3.1-8b-instant",messages:[{role:"system",content:`Você é o PokerBot, um assistente especializado em análise de dados de poker. 
              
              CONTEXTO DOS DADOS:
              ${n}
              
              IMPORTANTE:
              - Responda em português brasileiro
              - Seja direto e objetivo
              - Use emojis ocasionalmente
              - Analise os dados fornecidos
              - Se não tiver dados suficientes, diga isso claramente
              - Foque em insights úteis sobre o poker`},{role:"user",content:d}],temperature:.7,max_tokens:300})});if(!h.ok)throw new Error(`Erro na API: ${h.status}`);return((S=(P=(u=(await h.json()).choices)==null?void 0:u[0])==null?void 0:P.message)==null?void 0:S.content)||"Erro ao processar resposta da IA"}catch(h){return console.error("Erro na API Groq:",h),"🤖 Desculpe, não consegui processar sua pergunta com IA avançada no momento."}},w=async d=>{const n=N(),u=d.toLowerCase();if(u.includes("deve")||u.includes("devendo")){const P=n.filter(h=>h.totalProfit<0).sort((h,v)=>h.totalProfit-v.totalProfit);if(P.length===0)return"🎉 Ótima notícia! Ninguém está devendo no momento. Todos os jogadores estão com saldo positivo ou zerado!";let S=`📊 **Quem está devendo:**

`;return P.forEach((h,v)=>{S+=`${v+1}. **${h.name}**: ${b(h.totalProfit)} (${h.participations} sessões)
`}),S}if(u.includes("ganhou mais")||u.includes("lucrou mais")||u.includes("melhor")){const P=n.filter(h=>h.totalProfit>0).sort((h,v)=>v.totalProfit-h.totalProfit);if(P.length===0)return"😅 Nenhum jogador está com lucro no momento. Todos estão devendo ou empatados!";let S=`🏆 **Top jogadores com lucro:**

`;return P.slice(0,5).forEach((h,v)=>{S+=`${v+1}. **${h.name}**: ${b(h.totalProfit)} (${h.participations} sessões)
`}),S}if(u.includes("buy-in")||u.includes("investiu mais")||u.includes("gastou mais")){const P=n.sort((h,v)=>v.totalBuyIns-h.totalBuyIns);let S=`💰 **Maiores investidores:**

`;return P.slice(0,5).forEach((h,v)=>{S+=`${v+1}. **${h.name}**: ${b(h.totalBuyIns)} (${h.participations} sessões)
`}),S}if(u.includes("estatística")||u.includes("resumo")||u.includes("total")){const P=y.length,S=n.length,h=n.reduce((F,z)=>F+z.totalProfit,0),v=n.reduce((F,z)=>z.totalProfit>F.totalProfit?z:F,{totalProfit:-1/0}),_=n.reduce((F,z)=>z.totalProfit<F.totalProfit?z:F,{totalProfit:1/0});let q=`📈 **Resumo Geral:**

`;return q+=`🎯 **Total de sessões**: ${P}
`,q+=`👥 **Jogadores únicos**: ${S}
`,q+=`💰 **Saldo total**: ${b(h)}

`,v.totalProfit>0&&(q+=`🏆 **Maior ganhador**: ${v.name} (${b(v.totalProfit)})
`),_.totalProfit<0&&(q+=`😅 **Maior perdedor**: ${_.name} (${b(_.totalProfit)})
`),q}if(u.includes("recente")||u.includes("última")||u.includes("último")){const P=y.sort((h,v)=>new Date(v.date)-new Date(h.date)).slice(0,3);let S=`📅 **Sessões mais recentes:**

`;return P.forEach((h,v)=>{S+=`${v+1}. **${h.date}**
`,h.players_data&&h.players_data.forEach(_=>{const q=(_.buyIns||[]).reduce((z,H)=>z+H,0),F=(_.cashOut||0)-q;S+=`   • ${_.name}: ${b(F)}
`}),S+=`
`}),S}if(u.includes("transferência")||u.includes("recomendação")||u.includes("pagar")){const P=y.sort((h,v)=>new Date(v.date)-new Date(h.date))[0];if(!P||!P.recommendations)return"🤔 Não encontrei transferências pendentes na sessão mais recente. Verifique se há recomendações ou transferências otimizadas salvas.";let S=`💸 **Transferências da última sessão:**

`;return P.recommendations.forEach((h,v)=>{const _=h.paid?"✅ Pago":"⏳ Pendente";S+=`${v+1}. **${h.from}** → **${h.to}**: ${b(h.amount)} ${_}
`}),S}if(u.includes("janta")||u.includes("comida")){const P={};if(y.forEach(v=>{v.players_data&&v.players_data.forEach(_=>{var q;((q=_.dinner)==null?void 0:q.amount)>0&&(P[_.name]||(P[_.name]={total:0,sessions:0}),P[_.name].total+=_.dinner.amount,P[_.name].sessions+=1)})}),Object.keys(P).length===0)return"🍽️ Nenhuma janta registrada nas sessões ainda!";const S=Object.entries(P).sort(([,v],[,_])=>_.total-v.total).slice(0,5);let h=`🍽️ **Maiores gastadores com janta:**

`;return S.forEach(([v,_],q)=>{h+=`${q+1}. **${v}**: ${b(_.total)} (${_.sessions} sessões)
`}),h}if(u.includes("ranking")||u.includes("lidera")||u.includes("primeiro")||u.includes("top")){const P=n.filter(h=>h.totalProfit>0).sort((h,v)=>v.totalProfit-h.totalProfit).slice(0,5);if(P.length===0)return"😅 Nenhum jogador está com lucro no momento para formar um ranking!";let S=`🏆 **Top 5 Ranking por Lucro:**

`;return P.forEach((h,v)=>{S+=`${v===0?"🥇":v===1?"🥈":v===2?"🥉":"🏅"} **${v+1}. ${h.name}**: ${b(h.totalProfit)} (${h.participations} sessões)
`}),S}if(a!=="API_KEY_PLACEHOLDER"&&a){const P=`
        DADOS DAS SESSÕES:
        - Total de sessões: ${y.length}
        - Jogadores: ${n.map(S=>`${S.name}: ${b(S.totalProfit)} (${S.participations} sessões)`).join(", ")}
        - Últimas sessões: ${y.slice(0,3).map(S=>{var h;return`${S.date}: ${(h=S.players_data)==null?void 0:h.map(v=>{var _;return`${v.name}: ${b((v.cashOut||0)-(((_=v.buyIns)==null?void 0:_.reduce((q,F)=>q+F,0))||0))}`}).join(", ")}`}).join(" | ")}
      `;return await E(d,P)}return`🤖 Desculpe, não entendi sua pergunta. Tente perguntar sobre:
• Quem deve quem?
• Quem ganhou mais?
• Estatísticas gerais
• Ranking de jogadores
• Transferências pendentes`},b=d=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d),j=async()=>{if(!p.trim())return;const d=p.trim();g(""),x(n=>[...n,{type:"user",content:d}]),k(!0);try{await new Promise(u=>setTimeout(u,1e3));const n=await w(d);k(!1),x(u=>[...u,{type:"ai",content:n}])}catch{k(!1),x(u=>[...u,{type:"ai",content:"😅 Desculpe, ocorreu um erro ao processar sua pergunta. Tente novamente!"}])}},I=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),j())},$=()=>{r(!t)},B=["Quem deve?","Quem ganhou?","Ranking","Estatísticas"];return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:$,className:`fixed bottom-6 right-6 w-14 h-14 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg z-50 flex items-center justify-center text-xl transition-all duration-300 ${t?"rotate-45":""}`,title:"PokerBot - Assistente IA",children:t?"✕":"🤖"}),t&&e.jsxs("div",{className:"fixed bottom-24 right-6 w-80 h-96 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-40 flex flex-col",children:[e.jsxs("div",{className:"bg-blue-600 text-white p-3 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🤖"}),e.jsx("span",{className:"font-semibold",children:"PokerBot"})]}),e.jsx("span",{className:"text-xs bg-blue-500 px-2 py-1 rounded",children:"Online"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[o.map((d,n)=>e.jsx("div",{className:`flex ${d.type==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] p-2 rounded-lg text-sm ${d.type==="user"?"bg-blue-600 text-white":"bg-slate-700 text-slate-200"}`,children:e.jsx("div",{className:"whitespace-pre-wrap",children:d.content})})},n)),A&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-slate-700 text-slate-200 p-2 rounded-lg text-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"🤖"}),e.jsx("span",{children:"PokerBot está digitando"}),e.jsx("span",{className:"animate-pulse",children:"⋯"})]})})}),e.jsx("div",{ref:R})]}),e.jsx("div",{className:"flex flex-wrap gap-1 p-2 bg-slate-700 border-t border-slate-600",children:B.map((d,n)=>e.jsx("button",{onClick:()=>g(d),className:"text-xs px-2 py-1 bg-slate-600 hover:bg-slate-500 rounded text-slate-300 hover:text-white transition-colors",children:d},n))}),e.jsx("div",{className:"p-3 border-t border-slate-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:p,onChange:d=>g(d.target.value),onKeyPress:I,placeholder:"Pergunte sobre suas sessões...",className:"flex-1 bg-slate-700 border border-slate-600 rounded px-3 py-2 text-sm text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"}),e.jsx("button",{onClick:j,disabled:!p.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white px-3 py-2 rounded text-sm transition-colors",children:"→"})]})})]})]})}function $e(){var T,R;const a=le(),{user:t,logout:r,isTenantAdmin:o,isSuperAdmin:x,getTenantInfo:p}=K(),[g,A]=m.useState(!1),k=m.useRef(null),y=p();return m.useEffect(()=>{const l=i=>{k.current&&!k.current.contains(i.target)&&A(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),e.jsxs("div",{className:"min-h-screen bg-slate-900 text-white",children:[e.jsx("header",{className:"bg-slate-800 border-b border-slate-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(L,{to:"/",className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"🎯"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-xl",children:"Poker SaaS"}),y&&e.jsxs("div",{className:"text-xs text-slate-400",children:[y.name," • ",y.plan]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsx(L,{to:"/dashboard",className:`px-3 py-2 rounded-md text-sm font-medium ${a.pathname==="/"||a.pathname==="/dashboard"?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"📊 Dashboard"}),o()&&e.jsx(L,{to:"/new",className:`px-3 py-2 rounded-md text-sm font-medium ${a.pathname==="/new"?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"➕ Nova Sessão"}),e.jsx(L,{to:"/history",className:`px-3 py-2 rounded-md text-sm font-medium ${a.pathname==="/history"?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"📋 Histórico"}),e.jsx(L,{to:"/ranking",className:`px-3 py-2 rounded-md text-sm font-medium ${a.pathname==="/ranking"?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"🏆 Ranking"}),o()&&e.jsx(L,{to:"/invites",className:`px-3 py-2 rounded-md text-sm font-medium ${a.pathname==="/invites"?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"👥 Convites"}),x()&&e.jsx(L,{to:"/admin",className:`px-3 py-2 rounded-md text-sm font-medium ${a.pathname==="/admin"?"bg-purple-600 text-white":"text-purple-300 hover:bg-purple-700"}`,children:"👑 Admin Global"})]}),e.jsxs("div",{className:"relative",ref:k,children:[e.jsxs("button",{onClick:()=>A(!g),className:"flex items-center space-x-2 text-slate-300 hover:text-white",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:((R=(T=t==null?void 0:t.name)==null?void 0:T.charAt(0))==null?void 0:R.toUpperCase())||"?"}),e.jsx("span",{className:"hidden sm:block",children:t==null?void 0:t.name}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-700 border-b",children:[e.jsx("div",{className:"font-medium",children:t==null?void 0:t.name}),e.jsx("div",{className:"text-gray-500",children:t==null?void 0:t.email}),e.jsx("div",{className:"text-xs text-gray-400",children:(t==null?void 0:t.role)==="super_admin"?"Super Admin":(t==null?void 0:t.role)==="admin"?"Administrador":"Membro"})]}),e.jsx("button",{onClick:()=>{A(!1),r()},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"🚪 Sair"})]})]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(be,{})}),e.jsx(Ae,{})]})}const Q=({children:a,requireAuth:t=!0,requireRole:r=null,requireSuperAdmin:o=!1})=>{const{user:x,loading:p,isAuthenticated:g,isSuperAdmin:A,isTenantAdmin:k}=K(),y=le();return p?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verificando autenticação..."})]})}):t&&!g()?e.jsx(ie,{to:"/login",state:{from:y},replace:!0}):!t&&g()?e.jsx(ie,{to:"/dashboard",replace:!0}):r&&!(()=>{switch(r){case"super_admin":return A();case"admin":return k();case"user":return x&&x.role==="user";default:return!1}})()?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🚫"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Você não tem permissão para acessar esta página."}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Voltar"})]})}):o&&!A()?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"👑"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Super Admin Requerido"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Esta área é restrita apenas para super administradores."}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Voltar"})]})}):a};function ce(){const{user:a,getTenantInfo:t,isTenantAdmin:r}=K(),[o,x]=m.useState(null),[p,g]=m.useState([]),[A,k]=m.useState(!0),y=t();m.useEffect(()=>{T()},[]);const T=async()=>{try{k(!0);const N=(await O.getSessions()).data||[],E=N.length,w=N.filter(j=>{const I=new Date(j.created_at),$=new Date;return I.getMonth()===$.getMonth()&&I.getFullYear()===$.getFullYear()}).length,b=N.slice(0,5);x({totalSessions:E,thisMonthSessions:w,totalPlayers:await R(N)}),g(b)}catch(i){console.error("Erro ao carregar dados do dashboard:",i)}finally{k(!1)}},R=async i=>{var N;try{return((N=(await O.getPlayers()).data)==null?void 0:N.length)||0}catch{return 0}},l=i=>new Date(i).toLocaleDateString("pt-BR");return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["👋 Olá, ",a==null?void 0:a.name,"!"]}),e.jsxs("p",{className:"text-slate-400",children:["Bem-vindo ao dashboard do ",y==null?void 0:y.name," • Plano ",y==null?void 0:y.plan]})]}),A?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Carregando dashboard..."})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-slate-800 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-4",children:"🎲"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:(o==null?void 0:o.totalSessions)||0}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Total de Sessões"})]})]})}),e.jsx("div",{className:"bg-slate-800 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-4",children:"📅"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:(o==null?void 0:o.thisMonthSessions)||0}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Este Mês"})]})]})}),e.jsx("div",{className:"bg-slate-800 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-4",children:"👥"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:(o==null?void 0:o.totalPlayers)||0}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Jogadores"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r()&&e.jsxs(L,{to:"/new",className:"bg-blue-600 hover:bg-blue-700 p-6 rounded-lg text-center transition-colors",children:[e.jsx("div",{className:"text-3xl mb-2",children:"➕"}),e.jsx("div",{className:"font-semibold",children:"Nova Sessão"})]}),e.jsxs(L,{to:"/history",className:"bg-slate-800 hover:bg-slate-700 p-6 rounded-lg text-center transition-colors",children:[e.jsx("div",{className:"text-3xl mb-2",children:"📋"}),e.jsx("div",{className:"font-semibold",children:"Histórico"})]}),e.jsxs(L,{to:"/ranking",className:"bg-slate-800 hover:bg-slate-700 p-6 rounded-lg text-center transition-colors",children:[e.jsx("div",{className:"text-3xl mb-2",children:"🏆"}),e.jsx("div",{className:"font-semibold",children:"Ranking"})]}),r()&&e.jsxs(L,{to:"/invites",className:"bg-slate-800 hover:bg-slate-700 p-6 rounded-lg text-center transition-colors",children:[e.jsx("div",{className:"text-3xl mb-2",children:"👥"}),e.jsx("div",{className:"font-semibold",children:"Convites"})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"📊 Sessões Recentes"}),e.jsx(L,{to:"/history",className:"text-blue-400 hover:text-blue-300 text-sm",children:"Ver todas →"})]}),p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎲"}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Nenhuma sessão ainda"}),e.jsx("p",{className:"text-slate-400 mb-6",children:r()?"Crie sua primeira sessão para começar!":"Aguarde o administrador criar a primeira sessão."}),r()&&e.jsx(L,{to:"/new",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"➕ Primeira Sessão"})]}):e.jsx("div",{className:"space-y-3",children:p.map(i=>{var N;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:"🎲"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-white font-medium",children:["Sessão ",i.id]}),e.jsxs("div",{className:"text-slate-400 text-sm",children:[l(i.date)," • ",i.created_at?l(i.created_at):""]})]})]}),e.jsxs("div",{className:"text-slate-400 text-sm",children:[((N=i.players_data)==null?void 0:N.length)||0," jogadores"]})]},i.id)})})]})]})]})}function pe({initialData:a=null,onSave:t=null}){const[r,o]=m.useState((a==null?void 0:a.players_data)||[]),[x,p]=m.useState((a==null?void 0:a.date)||new Date().toISOString().split("T")[0]),[g,A]=m.useState(!1),[k,y]=m.useState([]),[T,R]=m.useState([]),[l,i]=m.useState(a?"values":"names"),[N,E]=m.useState(0),[w,b]=m.useState({}),[j,I]=m.useState([]),[$,B]=m.useState(!1),[d,n]=m.useState({from:"",to:"",amount:""}),u=async()=>{try{const s=await O.getPlayers();R(s.data||[])}catch(s){console.error("Erro ao carregar jogadores:",s)}},P=()=>{o([...r,{name:""}]),E(r.length)},S=()=>{o([...r,{name:"",buyIns:[50],cashOut:0,dinner:{amount:0,paid:!1}}])},h=()=>{const s=r.filter(f=>f.name.trim());if(s.length===0){alert("Adicione pelo menos um jogador");return}const c=s.map(f=>({...f,buyIns:[50],cashOut:0,dinner:{amount:0,paid:!1}}));o(c),i("values")},v=s=>{o(r.filter((c,f)=>f!==s))},_=(s,c,f)=>{const C=[...r];if(c.includes(".")){const[M,V]=c.split(".");C[s][M][V]=f}else C[s][c]=f;o(C)},q=s=>{const c=[...r];c[s].buyIns.push(50),o(c)},F=(s,c)=>{if(c>0){const f=[...r];f[s].buyIns.push(Number(c)),o(f)}},z=(s,c)=>{if(c===0)return;const f=[...r];f[s].buyIns.splice(c,1),o(f)},H=(s,c)=>!s||s.length<2?[]:T.filter(C=>C.toLowerCase().includes(s.toLowerCase())).slice(0,5),X=(s,c)=>{if(s.key==="Enter"&&(s.preventDefault(),r[c].name.trim()))if(c<r.length-1){const f=document.querySelector(`input[data-player-index="${c+1}"]`);f==null||f.focus()}else P(),setTimeout(()=>{const f=document.querySelector(`input[data-player-index="${r.length}"]`);f==null||f.focus()},100)},G=s=>{const c=(s.buyIns||[]).reduce((f,C)=>f+C,0);return(s.cashOut||0)-c},Y=(s=r,c=[])=>{console.log("🔍 Iniciando otimização..."),console.log("👥 Jogadores:",s),console.log("📝 Recomendações:",c);const f=s.map(D=>({name:D.name,net:G(D)}));console.log("💰 Saldos iniciais:",f);const C=[...f];c.forEach(D=>{const J=C.find(ne=>ne.name===D.from),U=C.find(ne=>ne.name===D.to);J&&U&&(console.log(`📝 Aplicando recomendação: ${D.from} paga ${D.amount} para ${D.to}`),console.log(`   Antes: ${J.name}=${J.net}, ${U.name}=${U.net}`),J.net<0?J.net+=Number(D.amount):J.net-=Number(D.amount),U.net>0?U.net-=Number(D.amount):U.net+=Number(D.amount),console.log(`   Depois: ${J.name}=${J.net}, ${U.name}=${U.net}`))}),console.log("💰 Saldos após recomendações:",C);const M=C.filter(D=>D.net>0),V=C.filter(D=>D.net<0).map(D=>({...D,net:Math.abs(D.net)}));console.log("📊 Credores:",M),console.log("📊 Devedores:",V);const W=[];for(;M.length>0&&V.length>0;){const D=M[0],J=V[0],U=Math.min(D.net,J.net);console.log(`💸 Transferência otimizada: ${J.name} → ${D.name}: ${U}`),W.push({from:J.name,to:D.name,amount:U,paid:!1}),D.net-=U,J.net-=U,D.net===0&&M.shift(),J.net===0&&V.shift()}return console.log("✅ Resultado final:",W),W},Z=()=>{if(!d.from||!d.to||!d.amount){alert("Preencha todos os campos");return}if(d.from===d.to){alert("Não é possível pagar para si mesmo");return}if(Number(d.amount)<=0){alert("Valor deve ser positivo");return}const s={from:d.from,to:d.to,amount:Number(d.amount),paid:!1};I([...j,s]),n({from:"",to:"",amount:""}),B(!1)},ee=s=>{const c=j.filter((f,C)=>C!==s);I(c)},se=()=>{const s=Y(r,j);y(s)},te=async()=>{if(!r.some(s=>s.name)){alert("Adicione pelo menos um jogador");return}A(!0);try{const s={date:x,players_data:r.filter(c=>c.name),recommendations:[...j,...k]};await(t?t(s):O.createSession(s)),alert("Sessão salva com sucesso!")}catch(s){console.error("Erro ao salvar:",s),alert("Erro ao salvar sessão")}finally{A(!1)}};return m.useEffect(()=>{if(r.length>0&&r.some(s=>s.name))try{const s=Y(r,j);y(s)}catch(s){console.error("Erro ao calcular otimização:",s),y([])}else y([])},[r,j]),m.useEffect(()=>{a||u()},[a]),m.useEffect(()=>{!a&&r.length===0&&o([{name:""}])},[a]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Data"}),e.jsx("input",{type:"date",value:x,onChange:s=>p(s.target.value),className:"bg-slate-800 border border-slate-700 rounded px-3 py-2"})]}),l==="names"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:P,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Adicionar Jogador"}),e.jsx("button",{onClick:h,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Continuar para Valores"})]}):e.jsx("button",{onClick:S,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Adicionar Jogador"})]}),l==="names"&&e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Adicione os jogadores da sessão"}),e.jsx("div",{className:"grid gap-3",children:r.map((s,c)=>{const f=H(s.name),C=w[c]&&f.length>0;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-slate-400 w-8",children:[c+1,"."]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:s.name,onChange:M=>{_(c,"name",M.target.value),M.target.value.length>=2?b(V=>({...V,[c]:!0})):b(V=>({...V,[c]:!1}))},onKeyPress:M=>X(M,c),onBlur:()=>{setTimeout(()=>{b(M=>({...M,[c]:!1}))},200)},onFocus:()=>{s.name&&s.name.length>=2&&b(M=>({...M,[c]:!0}))},"data-player-index":c,className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2",placeholder:"Nome do jogador (pressione Enter para próximo)",autoFocus:c===N}),C&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-700 border border-slate-600 rounded-b mt-1 z-10 shadow-lg",children:f.map((M,V)=>e.jsx("button",{onClick:()=>{_(c,"name",M),b(W=>({...W,[c]:!1}))},className:"w-full text-left px-3 py-2 hover:bg-slate-600 text-sm",children:M},V))})]}),e.jsx("button",{onClick:()=>v(c),className:"text-red-400 hover:text-red-300 p-1",children:"✕"})]},c)})}),e.jsx("div",{className:"mt-4 text-sm text-slate-400",children:"💡 Dica: Digite 2+ letras para ver sugestões de jogadores anteriores"})]}),l==="values"&&e.jsx("div",{className:"grid gap-4",children:r.map((s,c)=>e.jsx("div",{className:"bg-slate-800 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:s.name,onChange:f=>_(c,"name",f.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2",placeholder:"Nome do jogador"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Buy-in Inicial"}),e.jsx("input",{type:"number",value:s.buyIns[0],onChange:f=>{const C=[...r];C[c].buyIns[0]=Number(f.target.value),o(C)},className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Rebuys"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>q(c),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"+50 Rebuy"}),e.jsx("input",{type:"number",placeholder:"Valor",className:"w-20 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-sm",onKeyPress:f=>{if(f.key==="Enter"){const C=f.target.value;C&&Number(C)>0&&(F(c,C),f.target.value="")}}})]})]}),e.jsxs("div",{className:"space-y-1",children:[s.buyIns.map((f,C)=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-600 px-2 py-1 rounded text-sm",children:[e.jsxs("span",{children:[C===0?"🎯 Buy-in:":"🔄 Rebuy:"," R$ ",f.toFixed(2)]}),C>0&&e.jsx("button",{type:"button",onClick:()=>z(c,C),className:"text-red-400 hover:text-red-300 ml-2",children:"✕"})]},C)),e.jsxs("div",{className:"text-xs text-slate-400 font-semibold",children:["Total Investido: R$ ",(s.buyIns||[]).reduce((f,C)=>f+C,0).toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Cash-out"}),e.jsx("input",{type:"number",value:s.cashOut,onChange:f=>_(c,"cashOut",Number(f.target.value)),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Janta"}),e.jsx("input",{type:"number",value:s.dinner.amount,onChange:f=>_(c,"dinner.amount",Number(f.target.value)),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.dinner.paid,onChange:f=>_(c,"dinner.paid",f.target.checked),className:"mr-2"}),"Janta Paga"]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:`font-bold ${G(s)>=0?"text-green-400":"text-red-400"}`,children:[G(s)>=0?"+":"","R$ ",G(s).toFixed(2)]}),e.jsx("button",{onClick:()=>v(c),className:"text-red-400 hover:text-red-300",children:"✕"})]})]})},c))}),l==="values"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Sistema de Recomendações"}),e.jsx("button",{onClick:()=>B(!$),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:$?"Cancelar":"+ Adicionar Recomendação"})]}),$&&e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg mb-4",children:[e.jsx("h4",{className:"text-md font-medium mb-3",children:"Nova Recomendação"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Quem paga"}),e.jsxs("select",{value:d.from,onChange:s=>n({...d,from:s.target.value}),className:"w-full bg-slate-600 border border-slate-500 rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Selecione..."}),r.filter(s=>s.name).map(s=>e.jsx("option",{value:s.name,children:s.name},s.name))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Para quem"}),e.jsxs("select",{value:d.to,onChange:s=>n({...d,to:s.target.value}),className:"w-full bg-slate-600 border border-slate-500 rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Selecione..."}),r.filter(s=>s.name&&s.name!==d.from).map(s=>e.jsx("option",{value:s.name,children:s.name},s.name))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Valor (R$)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:d.amount,onChange:s=>n({...d,amount:s.target.value}),className:"w-full bg-slate-600 border border-slate-500 rounded px-3 py-2",placeholder:"0.00"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:Z,className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded",children:"Adicionar"})})]})]}),j.length>0&&e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"text-md font-medium",children:["Recomendações Fixas (",j.length,")"]}),e.jsx("button",{onClick:se,className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 rounded text-sm",children:"🔄 Atualizar Otimização"})]}),e.jsx("div",{className:"space-y-2",children:j.map((s,c)=>e.jsxs("div",{className:"flex justify-between items-center bg-green-800 p-3 rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs",children:"📝 Fixo"}),e.jsxs("span",{children:[s.from," → ",s.to]}),e.jsxs("span",{className:"font-bold text-green-300",children:["R$ ",s.amount.toFixed(2)]})]}),e.jsx("button",{onClick:()=>ee(c),className:"text-red-400 hover:text-red-300 p-1",children:"✕"})]},c))}),e.jsx("div",{className:"mt-3 text-xs text-slate-400",children:"💡 Recomendações são transferências fixas que devem ser pagas. O sistema otimiza apenas o restante."})]}),k.length>0&&e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg",children:[e.jsxs("h4",{className:"text-md font-medium mb-3",children:["Transferências Otimizadas (",k.length,")"]}),e.jsx("div",{className:"space-y-2",children:k.map((s,c)=>e.jsxs("div",{className:"flex justify-between items-center bg-blue-800 p-3 rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs",children:"🔄 Otimizado"}),e.jsxs("span",{children:[s.from," → ",s.to]}),e.jsxs("span",{className:"font-bold text-blue-300",children:["R$ ",s.amount.toFixed(2)]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"checkbox",checked:s.paid||!1,onChange:f=>{const C=[...k];C[c].paid=f.target.checked,y(C)},className:"mr-1"}),e.jsx("span",{className:s.paid?"text-green-400":"text-slate-400",children:s.paid?"Pago":"Pendente"})]})})]},c))}),e.jsx("div",{className:"mt-3 text-xs text-slate-400",children:"💡 Transferências otimizadas calculadas pelo sistema para minimizar o número de pagamentos."})]}),j.length>0||k.length>0?e.jsxs("div",{className:"mt-4 p-3 bg-slate-600 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total de Transferências:"}),e.jsx("span",{className:"font-bold",children:j.length+k.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Recomendações Fixas:"}),e.jsx("span",{className:"text-green-400",children:j.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Otimizadas:"}),e.jsx("span",{className:"text-blue-400",children:k.length})]})]}):null]})}),l==="values"&&e.jsx("button",{onClick:te,disabled:g,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white py-3 rounded-lg font-medium",children:g?"Salvando...":"Salvar Sessão"})]})}function Te(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Nova Sessão"}),e.jsx("p",{className:"text-slate-400",children:"Adicione jogadores e controle os valores"})]}),e.jsx(pe,{})]})}function Ie(){const[a,t]=m.useState([]),[r,o]=m.useState(!0),[x,p]=m.useState(null);m.useEffect(()=>{g()},[]);const g=async()=>{try{o(!0);const i=await O.getSessions();t(i.data||[])}catch(i){console.error("Erro ao carregar sessões:",i)}finally{o(!1)}},A=i=>new Date(i).toLocaleDateString("pt-BR"),k=i=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i||0),y=i=>{var N;return((N=i.players_data)==null?void 0:N.reduce((E,w)=>{var b;return E+(((b=w.buyIns)==null?void 0:b.reduce((j,I)=>j+I,0))||0)},0))||0},T=i=>{p(i)},R=async i=>{if(window.confirm("Tem certeza que deseja excluir esta sessão?"))try{await O.deleteSession(i),g(),alert("Sessão excluída com sucesso!")}catch(N){console.error("Erro ao excluir sessão:",N),alert("Erro ao excluir sessão")}},l=async i=>{try{await O.updateSession(x.id,i),p(null),g(),alert("Sessão atualizada com sucesso!")}catch(N){console.error("Erro ao atualizar sessão:",N),alert("Erro ao atualizar sessão")}};return r?e.jsx("div",{className:"text-center",children:"Carregando sessões..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Histórico de Sessões"}),e.jsx(L,{to:"/new",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Nova Sessão"})]}),x&&e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Editando Sessão"}),e.jsx("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-white",children:"✕ Cancelar"})]}),e.jsx(pe,{initialData:x,onSave:l})]}),a.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-12",children:[e.jsx("p",{children:"Nenhuma sessão encontrada"}),e.jsx(L,{to:"/new",className:"text-blue-400 hover:text-blue-300",children:"Criar primeira sessão"})]}):e.jsx("div",{className:"grid gap-4",children:a.map(i=>{var N,E,w;return e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold mb-2",children:["Sessão do dia ",A(i.date)]}),e.jsxs("div",{className:"text-slate-400",children:[e.jsxs("p",{children:["Total em jogo: ",k(y(i))]}),e.jsxs("p",{children:["Jogadores: ",((N=i.players_data)==null?void 0:N.length)||0]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T(i),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"✏️ Editar"}),e.jsx("button",{onClick:()=>R(i.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"🗑️ Remover"})]})]}),e.jsx("div",{className:"grid gap-2",children:(E=i.players_data)==null?void 0:E.map((b,j)=>{var $,B,d;const I=(b.cashOut||0)-((($=b.buyIns)==null?void 0:$.reduce((n,u)=>n+u,0))||0);return e.jsxs("div",{className:"bg-slate-700 p-3 rounded",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:b.name}),((B=b.dinner)==null?void 0:B.amount)>0&&e.jsxs("span",{className:"ml-2 text-sm text-slate-400",children:["(Janta: ",k(b.dinner.amount),")"]})]}),e.jsxs("div",{className:`font-bold ${I>=0?"text-green-400":"text-red-400"}`,children:[I>=0?"+":"",k(I)]})]}),((d=b.dinner)==null?void 0:d.amount)>0&&e.jsxs("div",{className:"flex justify-between items-center bg-slate-600 p-2 rounded text-sm",children:[e.jsxs("span",{className:"text-slate-300",children:["🍽️ Janta: ",k(b.dinner.amount)]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:b.dinner.paid||!1,onChange:n=>{const u=[...a],P=u.findIndex(S=>S.id===i.id);P!==-1&&(u[P].players_data[j].dinner.paid=n.target.checked,t(u))},className:"mr-1"}),e.jsx("span",{className:b.dinner.paid?"text-green-400":"text-slate-400",children:b.dinner.paid?"✓ Pago":"Pendente"})]})})]})]},j)})}),((w=i.recommendations)==null?void 0:w.length)>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Transferências Sugeridas:"}),e.jsx("div",{className:"space-y-2",children:i.recommendations.map((b,j)=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-700 p-2 rounded text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-slate-300",children:[b.from," → ",b.to]}),e.jsx("span",{className:"font-bold text-green-400",children:k(b.amount)})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:b.paid||!1,onChange:I=>{const $=[...a],B=$.findIndex(d=>d.id===i.id);B!==-1&&($[B].recommendations[j].paid=I.target.checked,t($))},className:"mr-1"}),e.jsx("span",{className:b.paid?"text-green-400":"text-slate-400",children:b.paid?"✓ Pago":"Pendente"})]})})]},j))})]})]},i.id)})})]})}function Oe(){const[a,t]=m.useState([]),[r,o]=m.useState(!0),[x,p]=m.useState([]),[g,A]=m.useState([]),k=async()=>{try{const l=await O.getSessions();t(l.data||[])}catch(l){console.error("Erro ao carregar sessões:",l)}finally{o(!1)}},y=()=>{const l={};a.forEach(E=>{E.players_data&&Array.isArray(E.players_data)&&E.players_data.forEach(w=>{var b;if(w.name){l[w.name]||(l[w.name]={name:w.name,participations:0,totalBuyIns:0,totalCashOut:0,totalProfit:0,totalDinner:0,sessions:[]});const j=(w.buyIns||[]).reduce((d,n)=>d+n,0),I=w.cashOut||0,$=((b=w.dinner)==null?void 0:b.amount)||0,B=I-j;l[w.name].participations+=1,l[w.name].totalBuyIns+=j,l[w.name].totalCashOut+=I,l[w.name].totalProfit+=B,l[w.name].totalDinner+=$,l[w.name].sessions.push({date:E.date,profit:B,dinner:$})}})});const N=Object.values(l).map(E=>({...E,averageProfit:E.totalProfit/E.participations,winRate:E.sessions.filter(w=>w.profit>0).length/E.participations*100})).sort((E,w)=>w.totalProfit-E.totalProfit);p(N),A(N.slice(0,10))};m.useEffect(()=>{k()},[]),m.useEffect(()=>{a.length>0&&y()},[a]);const T=l=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l),R=l=>`${l.toFixed(1)}%`;return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-slate-400",children:"Carregando ranking..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"🏆 Ranking dos Jogadores"}),e.jsx("p",{className:"text-slate-400",children:"Estatísticas completas de todas as sessões"})]}),g.length>0&&e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"🥇 Top 10 Jogadores"}),e.jsx("div",{className:"space-y-3",children:g.map((l,i)=>{const N=Math.max(...g.map(b=>Math.abs(b.totalProfit))),E=Math.abs(l.totalProfit)/N*100,w=l.totalProfit>=0;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-8 text-center font-bold",children:[i===0&&"🥇",i===1&&"🥈",i===2&&"🥉",i>2&&`${i+1}º`]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"font-medium text-white",children:l.name}),e.jsx("span",{className:`font-bold ${w?"text-green-400":"text-red-400"}`,children:T(l.totalProfit)})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-6",children:e.jsx("div",{className:`h-6 rounded-full transition-all duration-500 ${w?"bg-green-500":"bg-red-500"}`,style:{width:`${E}%`},children:e.jsxs("div",{className:"flex items-center justify-center h-full text-white text-xs font-medium",children:[l.participations," sessões"]})})})})]})]},l.name)})})]}),x.length>0&&e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"📊 Estatísticas Completas"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-left py-3 px-2",children:"Jogador"}),e.jsx("th",{className:"text-center py-3 px-2",children:"Sessões"}),e.jsx("th",{className:"text-right py-3 px-2",children:"Lucro Total"}),e.jsx("th",{className:"text-right py-3 px-2",children:"Lucro Médio"}),e.jsx("th",{className:"text-center py-3 px-2",children:"Taxa Vitória"}),e.jsx("th",{className:"text-right py-3 px-2",children:"Investido"}),e.jsx("th",{className:"text-right py-3 px-2",children:"Recebido"})]})}),e.jsx("tbody",{children:x.map((l,i)=>e.jsxs("tr",{className:`border-b border-slate-700 hover:bg-slate-700/50 ${i<3?"bg-slate-700/30":""}`,children:[e.jsx("td",{className:"py-3 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-white",children:l.name}),i===0&&e.jsx("span",{className:"text-yellow-400",children:"👑"}),i===1&&e.jsx("span",{className:"text-gray-400",children:"🥈"}),i===2&&e.jsx("span",{className:"text-amber-600",children:"🥉"})]})}),e.jsx("td",{className:"text-center py-3 px-2 text-slate-300",children:l.participations}),e.jsx("td",{className:`text-right py-3 px-2 font-bold ${l.totalProfit>=0?"text-green-400":"text-red-400"}`,children:T(l.totalProfit)}),e.jsx("td",{className:`text-right py-3 px-2 ${l.averageProfit>=0?"text-green-400":"text-red-400"}`,children:T(l.averageProfit)}),e.jsx("td",{className:"text-center py-3 px-2 text-slate-300",children:R(l.winRate)}),e.jsx("td",{className:"text-right py-3 px-2 text-slate-300",children:T(l.totalBuyIns)}),e.jsx("td",{className:"text-right py-3 px-2 text-slate-300",children:T(l.totalCashOut)})]},l.name))})]})})]}),x.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:a.length}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Total de Sessões"})]}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:x.length}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Jogadores Únicos"})]}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:T(x.reduce((l,i)=>l+Math.max(0,i.totalProfit),0))}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Lucro Total (Ganhadores)"})]}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:T(x.reduce((l,i)=>l+Math.min(0,i.totalProfit),0))}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Perda Total (Perdedores)"})]})]}),x.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-slate-400 text-lg",children:"Nenhuma sessão encontrada"}),e.jsx("div",{className:"text-slate-500 text-sm mt-2",children:"Crie sua primeira sessão para ver o ranking"})]})]})}const De=()=>{var i,N;const[a,t]=m.useState({email:"",password:""}),[r,o]=m.useState(!1),{login:x,loading:p,error:g,clearError:A}=K(),k=de(),T=((N=(i=le().state)==null?void 0:i.from)==null?void 0:N.pathname)||"/dashboard",R=E=>{const{name:w,value:b}=E.target;t(j=>({...j,[w]:b})),g&&A()},l=async E=>{if(E.preventDefault(),!(!a.email||!a.password))try{await x(a.email,a.password),k(T,{replace:!0})}catch(w){console.error("Erro no login:",w)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[e.jsx("div",{className:"text-white font-bold text-2xl",children:"🎯 Poker SaaS"}),e.jsxs("div",{className:"text-white/80",children:["Não tem conta? ",e.jsx(L,{to:"/register",className:"text-white underline hover:text-blue-200",children:"Cadastre-se"})]})]})}),e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx("div",{className:"hidden lg:flex lg:w-1/2 flex-col justify-center p-12 text-white",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Gerencie suas sessões de poker como um profissional"}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:"✓"}),e.jsx("span",{children:"Controle completo de buy-ins e cash-outs"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:"✓"}),e.jsx("span",{children:"Rankings automáticos e estatísticas"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:"✓"}),e.jsx("span",{children:"Convites para jogadores do grupo"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:"✓"}),e.jsx("span",{children:"Sistema de recomendações inteligentes"})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Planos Disponíveis"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Basic"}),e.jsx("span",{className:"font-semibold",children:"R$ 29/mês"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Premium"}),e.jsx("span",{className:"font-semibold",children:"R$ 59/mês"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Enterprise"}),e.jsx("span",{className:"font-semibold",children:"R$ 99/mês"})]})]})]})]})}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Fazer Login"}),e.jsx("p",{className:"text-gray-600",children:"Acesse sua conta e gerencie suas sessões"})]}),g&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-500 mr-2",children:"⚠️"}),e.jsx("div",{className:"text-red-700 text-sm",children:g})]})}),e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"seu@email.com",required:!0,disabled:p})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r?"text":"password",id:"password",name:"password",value:a.password,onChange:R,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Sua senha",required:!0,disabled:p}),e.jsx("button",{type:"button",onClick:()=>o(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:p,children:r?"🙈":"👁️"})]})]}),e.jsx("button",{type:"submit",disabled:p||!a.email||!a.password,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Entrando..."]}):"Entrar"})]}),e.jsxs("div",{className:"mt-8 text-center space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Esqueceu sua senha? ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Recuperar"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Novo por aqui?"}),e.jsx(L,{to:"/register",className:"text-blue-600 hover:underline font-medium",children:"Criar conta gratuita"})]})]})]}),!1]})})]})]})},qe=()=>{const[a,t]=m.useState({name:"",email:"",company:"",phone:"",plan:"basic",message:""}),[r,o]=m.useState(!1),{register:x,loading:p,error:g,clearError:A}=K();de();const k={basic:{name:"Basic",price:"R$ 29",features:["Até 50 sessões por mês","2 usuários","Relatórios básicos","Suporte por email"]},premium:{name:"Premium",price:"R$ 59",features:["Até 200 sessões por mês","5 usuários","Relatórios avançados","Sistema de convites","Suporte prioritário"]},enterprise:{name:"Enterprise",price:"R$ 99",features:["Sessões ilimitadas","Usuários ilimitados","Relatórios personalizados","API de integração","Suporte dedicado","Treinamento incluído"]}},y=R=>{const{name:l,value:i}=R.target;t(N=>({...N,[l]:i})),g&&A()},T=async R=>{R.preventDefault();try{await x(a),o(!0)}catch(l){console.error("Erro no cadastro:",l)}};return r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-600 via-blue-600 to-purple-600 flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Solicitação Enviada!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Sua solicitação de cadastro foi enviada com sucesso. Em breve você receberá um email com as instruções de acesso."}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Próximos passos:"}),e.jsxs("ol",{className:"text-sm text-blue-800 text-left space-y-1",children:[e.jsx("li",{children:"1. Aguarde a aprovação do administrador"}),e.jsx("li",{children:"2. Você receberá um email de confirmação"}),e.jsx("li",{children:"3. Faça login com suas credenciais"}),e.jsx("li",{children:"4. Comece a usar o sistema!"})]})]}),e.jsx(L,{to:"/login",className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Voltar ao Login"})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[e.jsx("div",{className:"text-white font-bold text-2xl",children:"🎯 Poker SaaS"}),e.jsxs("div",{className:"text-white/80",children:["Já tem conta? ",e.jsx(L,{to:"/login",className:"text-white underline hover:text-blue-200",children:"Fazer Login"})]})]})}),e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx("div",{className:"hidden lg:flex lg:w-1/2 flex-col justify-center p-12 text-white",children:e.jsxs("div",{className:"max-w-lg",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Escolha o plano ideal para seu grupo"}),e.jsx("div",{className:"space-y-6",children:Object.entries(k).map(([R,l])=>e.jsxs("div",{className:`bg-white/10 backdrop-blur-sm rounded-lg p-6 border-2 transition-all ${a.plan===R?"border-yellow-400 bg-white/20":"border-white/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:l.name}),e.jsxs("span",{className:"text-2xl font-bold",children:[l.price,"/mês"]})]}),e.jsx("ul",{className:"space-y-2 text-sm",children:l.features.map((i,N)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-green-400 mr-2",children:"✓"}),i]},N))})]},R))})]})}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Criar Conta"}),e.jsx("p",{className:"text-gray-600",children:"Solicite acesso ao Poker SaaS"})]}),g&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-500 mr-2",children:"⚠️"}),e.jsx("div",{className:"text-red-700 text-sm",children:g})]})}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Seu nome completo",required:!0,disabled:p})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"seu@email.com",required:!0,disabled:p})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-1",children:"Empresa/Grupo *"}),e.jsx("input",{type:"text",id:"company",name:"company",value:a.company,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome da empresa ou grupo",required:!0,disabled:p})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(11) 99999-9999",required:!0,disabled:p})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"plan",className:"block text-sm font-medium text-gray-700 mb-1",children:"Plano Desejado *"}),e.jsxs("select",{id:"plan",name:"plan",value:a.plan,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:p,children:[e.jsx("option",{value:"basic",children:"Basic - R$ 29/mês"}),e.jsx("option",{value:"premium",children:"Premium - R$ 59/mês"}),e.jsx("option",{value:"enterprise",children:"Enterprise - R$ 99/mês"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensagem (opcional)"}),e.jsx("textarea",{id:"message",name:"message",value:a.message,onChange:y,rows:"3",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Conte um pouco sobre seu grupo ou necessidades específicas...",disabled:p})]}),e.jsx("button",{type:"submit",disabled:p||!a.name||!a.email||!a.company||!a.phone,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Enviando..."]}):"Solicitar Acesso"})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:e.jsxs("p",{children:["Ao solicitar acesso, você concorda com nossos"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Termos de Uso"})," ","e"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Política de Privacidade"})]})})]}),e.jsx("div",{className:"mt-6 p-4 bg-white/10 backdrop-blur-sm rounded-lg text-white text-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-yellow-400 mr-2 mt-0.5",children:"💡"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-1",children:"Como funciona a aprovação:"}),e.jsxs("ul",{className:"space-y-1 text-white/80",children:[e.jsx("li",{children:"• Sua solicitação será analisada em até 24h"}),e.jsx("li",{children:"• Você receberá um email com o resultado"}),e.jsx("li",{children:"• Após aprovação, poderá fazer login imediatamente"})]})]})]})})]})})]})]})},Le=()=>{const{user:a,getTenantInfo:t}=K(),[r,o]=m.useState([]),[x,p]=m.useState([]),[g,A]=m.useState(!0),[k,y]=m.useState(null),[T,R]=m.useState(!1),[l,i]=m.useState({email:"",name:"",role:"user"}),[N,E]=m.useState(!1),w=t();m.useEffect(()=>{b()},[]);const b=async()=>{try{A(!0);const[n,u]=await Promise.all([O.getInvites(),O.getPendingInvites()]);o(n.data||[]),p(u.data||[])}catch(n){y("Erro ao carregar convites: "+n.message)}finally{A(!1)}},j=async n=>{if(n.preventDefault(),!(!l.email||!l.name))try{E(!0),await O.sendInvite(l),i({email:"",name:"",role:"user"}),R(!1),await b(),alert("Convite enviado com sucesso!")}catch(u){alert("Erro ao enviar convite: "+u.message)}finally{E(!1)}},I=async n=>{if(confirm("Tem certeza que deseja cancelar este convite?"))try{await O.cancelInvite(n),await b(),alert("Convite cancelado com sucesso!")}catch(u){alert("Erro ao cancelar convite: "+u.message)}},$=n=>new Date(n).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),B=n=>{switch(n){case"pending":return"text-yellow-600 bg-yellow-100";case"accepted":return"text-green-600 bg-green-100";case"expired":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},d=n=>{switch(n){case"pending":return"Pendente";case"accepted":return"Aceito";case"expired":return"Expirado";default:return n}};return g?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Carregando convites..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"👥 Gerenciar Convites"}),e.jsxs("p",{className:"text-slate-400",children:["Convide novos membros para ",w==null?void 0:w.name]})]}),e.jsx("button",{onClick:()=>R(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"➕ Novo Convite"})]}),k&&e.jsx("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-500 rounded-lg text-red-200",children:k}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-800 p-8 rounded-lg max-w-md w-full mx-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Novo Convite"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Nome *"}),e.jsx("input",{type:"text",value:l.name,onChange:n=>i(u=>({...u,name:n.target.value})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",placeholder:"Nome do convidado",required:!0,disabled:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:l.email,onChange:n=>i(u=>({...u,email:n.target.value})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",placeholder:"email@exemplo.com",required:!0,disabled:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Papel"}),e.jsxs("select",{value:l.role,onChange:n=>i(u=>({...u,role:n.target.value})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",disabled:N,children:[e.jsx("option",{value:"user",children:"Membro (visualização)"}),e.jsx("option",{value:"admin",children:"Administrador (pode editar)"})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>R(!1),className:"flex-1 px-4 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-500 transition-colors",disabled:N,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:N||!l.email||!l.name,children:N?"Enviando...":"Enviar Convite"})]})]})]})}),x.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"🕐 Convites Pendentes"}),e.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Convidado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Papel"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Enviado em"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Expira em"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:x.map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:n.name||"Nome não informado"}),e.jsx("div",{className:"text-sm text-slate-400",children:n.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${n.role==="admin"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:n.role==="admin"?"Administrador":"Membro"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:$(n.created_at)}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:$(n.expires_at)}),e.jsx("td",{className:"px-6 py-4 text-right text-sm",children:e.jsx("button",{onClick:()=>I(n.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Cancelar"})})]},n.id))})]})})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"📋 Histórico de Convites"}),r.length===0?e.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📭"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Nenhum convite enviado ainda"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Comece convidando membros para seu grupo!"}),e.jsx("button",{onClick:()=>R(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Enviar Primeiro Convite"})]}):e.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Convidado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Papel"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Enviado em"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Por"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:r.map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:n.name||"Nome não informado"}),e.jsx("div",{className:"text-sm text-slate-400",children:n.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${n.role==="admin"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:n.role==="admin"?"Administrador":"Membro"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${B(n.status)}`,children:d(n.status)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:$(n.created_at)}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:n.invited_by_name})]},n.id))})]})})})]})]})},Be=()=>{var S,h,v,_,q,F,z,H,X,G,Y,Z,ee,se,te;const{user:a}=K(),[t,r]=m.useState("overview"),[o,x]=m.useState(null),[p,g]=m.useState([]),[A,k]=m.useState([]),[y,T]=m.useState(null),[R,l]=m.useState(!0),[i,N]=m.useState(null),[E,w]=m.useState({status:"all",plan:"all",limit:20,offset:0});m.useEffect(()=>{b()},[]),m.useEffect(()=>{t==="tenants"?j():t==="activity"?I():t==="revenue"&&$()},[t,E]);const b=async()=>{try{l(!0);const s=await O.getGlobalStats();x(s.data)}catch(s){N("Erro ao carregar estatísticas: "+s.message)}finally{l(!1)}},j=async()=>{try{const s=await O.getAllTenants(E);g(s.data.tenants||[])}catch(s){N("Erro ao carregar tenants: "+s.message)}},I=async()=>{try{const s=await O.getRecentActivity();k(s.data||[])}catch(s){N("Erro ao carregar atividades: "+s.message)}},$=async()=>{try{const s=await O.getRevenueReport();T(s.data)}catch(s){N("Erro ao carregar dados de receita: "+s.message)}},B=async(s,c,f={})=>{try{switch(s){case"suspend":await O.suspendTenant(c,f.reason);break;case"activate":await O.activateTenant(c);break;case"change_plan":await O.changeTenantPlan(c,f.plan);break}await j(),alert("Ação executada com sucesso!")}catch(C){alert("Erro: "+C.message)}},d=s=>s?new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",n=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),u=s=>{switch(s){case"active":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"suspended":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},P=s=>{switch(s){case"basic":return"text-blue-600 bg-blue-100";case"premium":return"text-purple-600 bg-purple-100";case"enterprise":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}};return R?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Carregando dashboard global..."})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"👑 Dashboard Super Admin"}),e.jsxs("p",{className:"text-slate-400",children:["Olá, ",a==null?void 0:a.name,"! Visão global de todos os tenants do sistema."]})]}),i&&e.jsx("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-500 rounded-lg text-red-200",children:i}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-b border-slate-700",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"📊 Visão Geral",icon:"📊"},{id:"tenants",label:"🏢 Tenants",icon:"🏢"},{id:"activity",label:"📈 Atividade",icon:"📈"},{id:"revenue",label:"💰 Receita",icon:"💰"}].map(s=>e.jsx("button",{onClick:()=>r(s.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${t===s.id?"border-purple-500 text-purple-400":"border-transparent text-slate-400 hover:text-slate-300 hover:border-slate-300"}`,children:s.label},s.id))})})}),t==="overview"&&o&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-slate-800 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-4",children:"🏢"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:((S=o.overview)==null?void 0:S.active_tenants)||0}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Tenants Ativos"})]})]})}),e.jsx("div",{className:"bg-slate-800 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-4",children:"👥"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:((h=o.overview)==null?void 0:h.total_active_users)||0}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Usuários Ativos"})]})]})}),e.jsx("div",{className:"bg-slate-800 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-4",children:"🎲"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:((v=o.overview)==null?void 0:v.sessions_this_month)||0}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Sessões Este Mês"})]})]})}),e.jsx("div",{className:"bg-slate-800 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-4",children:"💰"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:n(((_=o.overview)==null?void 0:_.estimated_monthly_revenue)||0)}),e.jsx("div",{className:"text-slate-400 text-sm",children:"MRR Estimado"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"📈 Crescimento Mensal"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Novos Tenants:"}),e.jsx("span",{className:"text-white font-medium",children:((q=o.growth)==null?void 0:q.new_tenants_this_month)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Novos Usuários:"}),e.jsx("span",{className:"text-white font-medium",children:((F=o.growth)==null?void 0:F.new_users_this_month)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Sessões (7 dias):"}),e.jsx("span",{className:"text-white font-medium",children:((z=o.growth)==null?void 0:z.sessions_last_7_days)||0})]})]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"📊 Distribuição de Planos"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Basic:"}),e.jsx("span",{className:"text-blue-400 font-medium",children:((H=o.overview)==null?void 0:H.basic_plans)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Premium:"}),e.jsx("span",{className:"text-purple-400 font-medium",children:((X=o.overview)==null?void 0:X.premium_plans)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Enterprise:"}),e.jsx("span",{className:"text-orange-400 font-medium",children:((G=o.overview)==null?void 0:G.enterprise_plans)||0})]})]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"⚡ Status do Sistema"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Pendentes:"}),e.jsx("span",{className:"text-yellow-400 font-medium",children:((Y=o.overview)==null?void 0:Y.pending_tenants)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Suspensos:"}),e.jsx("span",{className:"text-red-400 font-medium",children:((Z=o.overview)==null?void 0:Z.suspended_tenants)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Último Login:"}),e.jsx("span",{className:"text-white font-medium text-xs",children:d((ee=o.growth)==null?void 0:ee.last_user_login)})]})]})]})]})]}),t==="tenants"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("select",{value:E.status,onChange:s=>w(c=>({...c,status:s.target.value})),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white text-sm",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"pending",children:"Pendentes"}),e.jsx("option",{value:"suspended",children:"Suspensos"})]}),e.jsxs("select",{value:E.plan,onChange:s=>w(c=>({...c,plan:s.target.value})),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white text-sm",children:[e.jsx("option",{value:"all",children:"Todos os Planos"}),e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"enterprise",children:"Enterprise"})]})]})}),e.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Tenant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Plano"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Usuários"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Sessões"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Criado"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-300 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:p.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:s.name}),e.jsx("div",{className:"text-sm text-slate-400",children:s.email}),e.jsx("div",{className:"text-xs text-slate-500",children:s.admin_name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(s.plan)}`,children:s.plan})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:[s.active_users,"/",s.max_users]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:[s.sessions_this_month,"/",s.max_sessions_per_month]}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:d(s.created_at)}),e.jsx("td",{className:"px-6 py-4 text-right text-sm",children:e.jsx("div",{className:"flex justify-end space-x-2",children:s.status==="active"?e.jsx("button",{onClick:()=>B("suspend",s.id,{reason:"Suspenso pelo admin"}),className:"text-red-400 hover:text-red-300 text-xs",children:"Suspender"}):e.jsx("button",{onClick:()=>B("activate",s.id),className:"text-green-400 hover:text-green-300 text-xs",children:"Ativar"})})})]},s.id))})]})})})]}),t==="activity"&&e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"📈 Atividade Recente"}),e.jsx("div",{className:"space-y-4",children:A.map((s,c)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:s.action==="successful_login"?"🔐":s.action==="create_session"?"🎲":s.action==="tenant_registration"?"📝":s.action==="tenant_approved"?"✅":s.action==="send_invite"?"📧":"📋"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-white font-medium",children:[s.user_name||"Sistema"," - ",s.action]}),e.jsxs("div",{className:"text-slate-400 text-sm",children:[s.tenant_name," • ",d(s.created_at)]})]})]}),e.jsx("div",{className:"text-slate-400 text-xs",children:s.ip_address})]},c))})]}),t==="revenue"&&y&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(se=y.revenue_by_plan)==null?void 0:se.map(s=>e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white capitalize",children:s.plan}),e.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${P(s.plan)}`,children:[s.tenant_count," tenants"]})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:n(s.monthly_revenue)}),e.jsx("div",{className:"text-slate-400 text-sm",children:"por mês"})]},s.plan))}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["💰 MRR Total: ",n(y.total_mrr||0)]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-slate-300",children:"Crescimento Mensal:"}),(te=y.monthly_growth)==null?void 0:te.slice(0,6).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-700 rounded",children:[e.jsx("span",{className:"text-slate-300",children:s.month}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white font-medium",children:n(s.monthly_mrr_added)}),e.jsxs("div",{className:"text-slate-400 text-sm",children:[s.new_tenants," novos tenants"]})]})]},s.month))]})]})]})]})};function re(){const a=fe();return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:e.jsx("div",{className:"max-w-lg w-full bg-white rounded-lg shadow-md p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-red-600 mb-4",children:"Oops!"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:a.status===404?"Página não encontrada":"Algo deu errado"}),e.jsx("p",{className:"text-gray-600 mb-8",children:a.status===404?"A página que você está procurando não existe ou foi movida.":"Ocorreu um erro inesperado. Por favor, tente novamente."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(L,{to:"/poker",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Voltar para o início"}),a.status!==404&&e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Detalhes técnicos: ",a.message||"Erro desconhecido"]})]})]})})})}const Fe=je([{path:"/login",element:e.jsx(Q,{requireAuth:!1,children:e.jsx(De,{})}),errorElement:e.jsx(re,{})},{path:"/register",element:e.jsx(Q,{requireAuth:!1,children:e.jsx(qe,{})}),errorElement:e.jsx(re,{})},{path:"/",element:e.jsx(Q,{requireAuth:!0,children:e.jsx($e,{})}),errorElement:e.jsx(re,{}),children:[{path:"",element:e.jsx(ce,{})},{path:"dashboard",element:e.jsx(ce,{})},{path:"new",element:e.jsx(Q,{requireRole:"admin",children:e.jsx(Te,{})})},{path:"history",element:e.jsx(Ie,{})},{path:"ranking",element:e.jsx(Oe,{})},{path:"invites",element:e.jsx(Q,{requireRole:"admin",children:e.jsx(Le,{})})},{path:"admin",element:e.jsx(Q,{requireSuperAdmin:!0,children:e.jsx(Be,{})})}]}],{basename:"/"});function Me(){return e.jsx(Re,{children:e.jsx(ve,{router:Fe})})}const ze=document.getElementById("root"),Je=ue(ze);Je.render(e.jsx(Ne.StrictMode,{children:e.jsx(Me,{})}));
